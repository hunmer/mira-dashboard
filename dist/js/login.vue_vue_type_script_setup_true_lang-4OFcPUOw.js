var _e=Object.defineProperty,$e=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var re=(n,o,a)=>o in n?_e(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a,V=(n,o)=>{for(var a in o||(o={}))ce.call(o,a)&&re(n,a,o[a]);if(H)for(var a of H(o))de.call(o,a)&&re(n,a,o[a]);return n},j=(n,o)=>$e(n,ke(o));var Y=(n,o)=>{var a={};for(var s in n)ce.call(n,s)&&o.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&H)for(var s of H(n))o.indexOf(s)<0&&de.call(n,s)&&(a[s]=n[s]);return a};var Z=(n,o,a)=>new Promise((s,l)=>{var u=g=>{try{c(a.next(g))}catch(r){l(r)}},t=g=>{try{c(a.throw(g))}catch(r){l(r)}},c=g=>g.done?s(g.value):Promise.resolve(g.value).then(u,t);c((a=a.apply(n,o)).next())});import{a$ as Ce,bv as he,bw as Pe,bx as Be,by as Le,bz as xe,bA as Te,a9 as Me,bB as Re,bC as ye,bD as Se,bE as De,bc as Ee,bF as Ie,bG as Ae,bu as ze,b0 as b,bh as Ve,bj as be,bH as Fe,bI as We,b2 as U,bJ as qe,bK as ue,bL as Ne,bM as G,bN as Oe,b1 as je,bO as Ue,bt as Qe,ay as Xe,bP as Ke}from"./bootstrap-CPnRZazZ.js";import{a4 as $,aa as v,ab as f,a7 as e,af as se,ag as ne,ac as p,a8 as k,av as T,J as S,P as N,x as y,aq as B,aw as X,ad as ae,aW as Q,bx as q,aV as F,ai as A,aj as P,a_ as ee,a$ as ve,T as we,Y as Ge,ao as Je,bI as He,b6 as fe,k as J,aB as L,ah as te,n as Ye,a as Ze,bJ as et,a9 as tt,Q as ot}from"../jse/index-index-DUSCGC6b.js";import{T as st}from"./auth-title-CAfFe8B1.js";import{C as nt,X as at,u as it,R as lt,M as rt,a as ct,b as dt,c as ut}from"./use-modal-D1oEkpsC.js";import{C as ft,a as pt,u as mt,s as pe,b as gt}from"./use-vben-form-CIxWieLv.js";import{_ as me}from"./render-content.vue_vue_type_script_lang-BENyTHol.js";const ht=Ce("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),yt=$({__name:"AlertDialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(n,{emit:o}){const l=he(n,o);return(u,t)=>(f(),v(e(Pe),se(ne(e(l))),{default:p(()=>[k(u.$slots,"default")]),_:3},16))}}),bt=$({__name:"AlertDialogAction",props:{asChild:{type:Boolean},as:{}},setup(n){const o=n;return(a,s)=>(f(),v(e(Be),se(ne(o)),{default:p(()=>[k(a.$slots,"default")]),_:3},16))}}),ge=$({__name:"AlertDialogCancel",props:{asChild:{type:Boolean},as:{}},setup(n){const o=n;return(a,s)=>(f(),v(e(Le),se(ne(o)),{default:p(()=>[k(a.$slots,"default")]),_:3},16))}}),vt={class:"bg-overlay z-popup inset-0"},wt=$({__name:"AlertDialogOverlay",setup(n){return xe(),(o,a)=>(f(),T("div",vt))}}),_t=$({__name:"AlertDialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},centered:{type:Boolean},class:{},modal:{type:Boolean,default:!0},open:{type:Boolean},overlayBlur:{},zIndex:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus","close","closed","opened"],setup(n,{expose:o,emit:a}){const s=n,l=a,u=S(()=>{const d=s,{class:r,modal:h,open:C}=d;return Y(d,["class","modal","open"])}),t=he(u,l),c=N(null);function g(r){var h;r.target===((h=c.value)==null?void 0:h.$el)&&(s.open?l("opened"):l("closed"))}return o({getContentRef:()=>c.value}),(r,h)=>(f(),v(e(Te),null,{default:p(()=>[y(Me,{name:"fade",appear:""},{default:p(()=>[r.open&&r.modal?(f(),v(wt,{key:0,style:X(j(V({},r.zIndex?{zIndex:r.zIndex}:{}),{position:"fixed",backdropFilter:r.overlayBlur&&r.overlayBlur>0?`blur(${r.overlayBlur}px)`:"none"})),onClick:h[0]||(h[0]=()=>l("close"))},null,8,["style"])):B("",!0)]),_:1}),y(e(Re),ae({ref_key:"contentRef",ref:c,style:j(V({},r.zIndex?{zIndex:r.zIndex}:{}),{position:"fixed"}),onAnimationend:g},e(t),{class:e(Q)("z-popup bg-background p-6 shadow-lg outline-none sm:rounded-xl","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95",{"data-[state=open]:slide-in-from-top-[48%] data-[state=closed]:slide-out-to-top-[48%]":!r.centered,"data-[state=open]:slide-in-from-top-[98%] data-[state=closed]:slide-out-to-top-[148%]":r.centered,"top-[10vh]":!r.centered,"top-1/2 -translate-y-1/2":r.centered},s.class)}),{default:p(()=>[k(r.$slots,"default")]),_:3},16,["style","class"])]),_:3}))}}),$t=$({__name:"AlertDialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,a=S(()=>{const t=o,{class:l}=t;return Y(t,["class"])}),s=ye(a);return(l,u)=>(f(),v(e(Se),ae(e(s),{class:e(Q)("text-muted-foreground text-sm",o.class)}),{default:p(()=>[k(l.$slots,"default")]),_:3},16,["class"]))}}),kt=$({__name:"AlertDialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const o=n,a=S(()=>{const t=o,{class:l}=t;return Y(t,["class"])}),s=ye(a);return(l,u)=>(f(),v(e(De),ae(e(s),{class:e(Q)("text-lg font-semibold leading-none tracking-tight",o.class)}),{default:p(()=>[k(l.$slots,"default")]),_:3},16,["class"]))}}),Ct=$({__name:"spine-text",props:{animationDuration:{default:2},animationIterationCount:{default:"infinite"}},setup(n){const o=S(()=>({animation:`shine ${n.animationDuration}s linear ${n.animationIterationCount}`}));return(a,s)=>(f(),T("div",{style:X(o.value),class:"vben-spine-text !bg-clip-text text-transparent"},[k(a.$slots,"default")],4))}}),Pt=$({__name:"slider-captcha-action",props:{actionStyle:{},isPassing:{type:Boolean},toLeft:{type:Boolean}},setup(n,{expose:o}){const a=n,s=q("actionRef"),l=N("0"),u=S(()=>{const{actionStyle:c}=a;return j(V({},c),{left:l.value})}),t=S(()=>Number.parseInt(l.value)>10&&!a.isPassing);return o({getEl:()=>s.value,getStyle:()=>{var c;return(c=s==null?void 0:s.value)==null?void 0:c.style},setLeft:c=>{l.value=c}}),(c,g)=>(f(),T("div",{ref_key:"actionRef",ref:s,class:F([{"transition-width !left-0 duration-300":c.toLeft,"rounded-md":t.value},"bg-background dark:bg-accent absolute left-0 top-0 flex h-full cursor-move items-center justify-center px-3.5 shadow-md"]),style:X(u.value),name:"captcha-action"},[y(e(Ee),{"is-passing":c.isPassing,class:"text-foreground/60 size-4"},{default:p(()=>[k(c.$slots,"icon",{},()=>[c.isPassing?(f(),v(e(Ae),{key:1})):(f(),v(e(Ie),{key:0}))])]),_:3},8,["is-passing"])],6))}}),Bt=$({__name:"slider-captcha-bar",props:{barStyle:{},toLeft:{type:Boolean}},setup(n,{expose:o}){const a=n,s=q("barRef"),l=N("0"),u=S(()=>{const{barStyle:t}=a;return j(V({},t),{width:l.value})});return o({getEl:()=>s.value,setWidth:t=>{l.value=t}}),(t,c)=>(f(),T("div",{ref_key:"barRef",ref:s,class:F([t.toLeft&&"transition-width !w-0 duration-300","bg-success absolute h-full"]),style:X(u.value)},null,6))}}),Lt=$({__name:"slider-captcha-content",props:{contentStyle:{},isPassing:{type:Boolean},successText:{},text:{}},setup(n,{expose:o}){const a=n,s=q("contentRef"),l=S(()=>{const{contentStyle:u}=a;return V({},u)});return o({getEl:()=>s.value}),(u,t)=>(f(),T("div",{ref_key:"contentRef",ref:s,class:F([{[u.$style.success]:u.isPassing},"absolute top-0 flex size-full select-none items-center justify-center text-xs"]),style:X(l.value)},[k(u.$slots,"text",{},()=>[y(e(Ct),{class:"flex h-full items-center"},{default:p(()=>[A(P(u.isPassing?u.successText:u.text),1)]),_:1})])],6))}}),xt="_success_fwxn1_2",Tt={success:xt},Mt={$style:Tt},Rt=ze(Lt,[["__cssModules",Mt]]),St=$({__name:"index",props:ee({class:{},actionStyle:{default:()=>({})},barStyle:{default:()=>({})},contentStyle:{default:()=>({})},wrapperStyle:{default:()=>({})},isSlot:{type:Boolean,default:!1},successText:{default:""},text:{default:""}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:ee(["end","move","start","success"],["update:modelValue"]),setup(n,{expose:o,emit:a}){const s=n,l=a,u=ve(n,"modelValue"),t=we({endTime:0,isMoving:!1,isPassing:!1,moveDistance:0,startTime:0,toLeft:!1});o({resume:m});const c=q("wrapperRef"),g=q("barRef"),r=q("contentRef"),h=q("actionRef");Ge(()=>t.isPassing,i=>{if(i){const{endTime:x,startTime:R}=t,D=(x-R)/1e3;l("success",{isPassing:i,time:D.toFixed(1)}),u.value=i}}),Je(()=>{t.isPassing=!!u.value});function C(i){return"pageX"in i?i.pageX:"touches"in i&&i.touches[0]?i.touches[0].pageX:0}function M(i){t.isPassing||h.value&&(l("start",i),t.moveDistance=C(i)-Number.parseInt(h.value.getStyle().left.replace("px","")||"0",10),t.startTime=Date.now(),t.isMoving=!0)}function d(i){var E,I,W;const x=(I=(E=c.value)==null?void 0:E.offsetWidth)!=null?I:220,R=(W=i==null?void 0:i.offsetWidth)!=null?W:40,D=x-R-6;return{actionWidth:R,offset:D,wrapperWidth:x}}function w(i){const{isMoving:x,moveDistance:R}=t;if(x){const D=e(h),E=e(g);if(!D||!E)return;const{actionWidth:I,offset:W,wrapperWidth:K}=d(D.getEl()),z=C(i)-R;l("move",{event:i,moveDistance:R,moveX:z}),z>0&&z<=W?(D.setLeft(`${z}px`),E.setWidth(`${z+I/2}px`)):z>W&&(D.setLeft(`${K-I}px`),E.setWidth(`${K-I/2}px`),s.isSlot||O())}}function _(i){const{isMoving:x,isPassing:R,moveDistance:D}=t;if(x&&!R){l("end",i);const E=h.value,I=e(g);if(!E||!I)return;const W=C(i)-D,{actionWidth:K,offset:z,wrapperWidth:ie}=d(E.getEl());W<z?s.isSlot?setTimeout(()=>{if(u.value){const le=e(r);le&&(le.getEl().style.width=`${Number.parseInt(I.getEl().style.width)}px`)}else m()},0):m():(E.setLeft(`${ie-K}px`),I.setWidth(`${ie-K/2}px`),O()),t.isMoving=!1}}function O(){if(s.isSlot){m();return}t.endTime=Date.now(),t.isPassing=!0,t.isMoving=!1}function m(){t.isMoving=!1,t.isPassing=!1,t.moveDistance=0,t.toLeft=!1,t.startTime=0,t.endTime=0;const i=e(h),x=e(g),R=e(r);!i||!x||!R||(R.getEl().style.width="100%",t.toLeft=!0,He(()=>{t.toLeft=!1,i.setLeft("0"),x.setWidth("0")},300))}return(i,x)=>(f(),T("div",{ref_key:"wrapperRef",ref:c,class:F(e(Q)("border-border bg-background-deep relative flex h-10 w-full items-center overflow-hidden rounded-md border text-center",s.class)),style:X(i.wrapperStyle),onMouseleave:_,onMousemove:w,onMouseup:_,onTouchend:_,onTouchmove:w},[y(Bt,{ref_key:"barRef",ref:g,"bar-style":i.barStyle,"to-left":t.toLeft},null,8,["bar-style","to-left"]),y(Rt,{ref_key:"contentRef",ref:r,"content-style":i.contentStyle,"is-passing":t.isPassing,"success-text":i.successText||e(b)("ui.captcha.sliderSuccessText"),text:i.text||e(b)("ui.captcha.sliderDefaultText")},fe({_:2},[i.$slots.text?{name:"text",fn:p(()=>[k(i.$slots,"text",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["content-style","is-passing","success-text","text"]),y(Pt,{ref_key:"actionRef",ref:h,"action-style":i.actionStyle,"is-passing":t.isPassing,"to-left":t.toLeft,onMousedown:M,onTouchstart:M},fe({_:2},[i.$slots.actionIcon?{name:"icon",fn:p(()=>[k(i.$slots,"actionIcon",{isPassing:t.isPassing})]),key:"0"}:void 0]),1032,["action-style","is-passing","to-left"])],38))}}),[io,Dt]=Ve("VbenAlertContext"),Et={class:"flex items-center"},It={class:"flex-auto"},At={class:"m-4 min-h-[30px]"},zt=$({__name:"alert",props:ee({beforeClose:{},bordered:{type:Boolean,default:!0},buttonAlign:{default:"end"},cancelText:{},centered:{type:Boolean,default:!0},confirmText:{},containerClass:{},content:{},contentClass:{},contentMasking:{type:Boolean},footer:{},icon:{},overlayBlur:{},showCancel:{type:Boolean},title:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:ee(["closed","confirm","opened"],["update:open"]),setup(n,{emit:o}){const a=n,s=o,l=ve(n,"open"),{$t:u}=be(),t=Fe.getComponents(),c=N(!1);function g(){s("closed",c.value),c.value=!1}function r(){c.value=!1}const h=S(()=>{var i;let m=null;if(a.icon){if(typeof a.icon=="string")switch(a.icon){case"error":{m=J(We,{style:{color:"hsl(var(--destructive))"}});break}case"info":{m=J(ht,{style:{color:"hsl(var(--info))"}});break}case"question":{m=pt;break}case"success":{m=J(nt,{style:{color:"hsl(var(--success))"}});break}case"warning":{m=J(ft,{style:{color:"hsl(var(--warning))"}});break}default:{m=null;break}}}else m=(i=a.icon)!=null?i:null;return m});function C(){w(),O(!1)}function M(){d(),O(!1)}Dt({doCancel:C,doConfirm:M});function d(){c.value=!0,s("confirm")}function w(){c.value=!1}const _=N(!1);function O(m){return Z(this,null,function*(){if(yield Ye(),!m&&a.beforeClose){_.value=!0;try{(yield a.beforeClose({isConfirm:c.value}))!==!1&&(l.value=!1)}finally{_.value=!1}}else l.value=m})}return(m,i)=>(f(),v(e(yt),{open:l.value,"onUpdate:open":O},{default:p(()=>[y(e(_t),{open:l.value,centered:m.centered,"overlay-blur":m.overlayBlur,onOpened:i[0]||(i[0]=x=>s("opened")),onClosed:g,onEscapeKeyDown:r,class:F(e(Q)(m.containerClass,"left-0 right-0 mx-auto flex max-h-[80%] flex-col p-0 duration-300 sm:w-[520px] sm:max-w-[80%] sm:rounded-[var(--radius)]",{"border-border border":m.bordered,"shadow-3xl":!m.bordered}))},{default:p(()=>[L("div",{class:F(e(Q)("relative flex-1 overflow-y-auto p-3",m.contentClass))},[m.title?(f(),v(e(kt),{key:0},{default:p(()=>[L("div",Et,[(f(),v(te(h.value),{class:"mr-2"})),L("span",It,P(e(u)(m.title)),1),m.showCancel?(f(),v(e(ge),{key:0,"as-child":""},{default:p(()=>[y(e(U),{variant:"ghost",size:"icon",class:"rounded-full",disabled:_.value,onClick:w},{default:p(()=>[y(e(at),{class:"text-muted-foreground size-4"})]),_:1},8,["disabled"])]),_:1})):B("",!0)])]),_:1})):B("",!0),y(e($t),null,{default:p(()=>[L("div",At,[y(e(me),{content:m.content,"render-br":""},null,8,["content"])]),_.value&&m.contentMasking?(f(),v(e(qe),{key:0,spinning:_.value},null,8,["spinning"])):B("",!0)]),_:1}),L("div",{class:F(["flex items-center justify-end gap-x-2",`justify-${m.buttonAlign}`])},[y(e(me),{content:m.footer},null,8,["content"]),m.showCancel?(f(),v(e(ge),{key:0,"as-child":""},{default:p(()=>[(f(),v(te(e(t).DefaultButton||e(U)),{disabled:_.value,variant:"ghost",onClick:w},{default:p(()=>[A(P(m.cancelText||e(u)("cancel")),1)]),_:1},8,["disabled"]))]),_:1})):B("",!0),y(e(bt),{"as-child":""},{default:p(()=>[(f(),v(te(e(t).PrimaryButton||e(U)),{loading:_.value,onClick:d},{default:p(()=>[A(P(m.confirmText||e(u)("confirm")),1)]),_:1},8,["loading"]))]),_:1})],2)],2)]),_:1},8,["open","centered","overlay-blur","class"])]),_:1},8,["open"]))}}),oe=N([]),{$t:Vt}=be();function Ft(n,o,a){return new Promise((s,l)=>{var h,C;const u=Ze(n)?{content:n}:V({},n),t=document.createElement("div");document.body.append(t);const c={container:t,instance:null},g=j(V({onClosed:M=>{oe.value=oe.value.filter(d=>d!==c),ue(null,t),t.parentNode&&t.remove(),M?s():l(new Error("dialog cancelled"))}},u),{open:!0,title:(h=u.title)!=null?h:Vt.value("prompt")}),r=J(zt,g);ue(r,t),c.instance=(C=r.component)==null?void 0:C.proxy,oe.value.push(c)})}const Wt=$({__name:"dingding-login",props:{clientId:{},corpId:{},redirectUri:{},isQrCode:{type:Boolean}},setup(n){const o=n,a=Ne(),[s,l]=it({header:!1,footer:!1,fullscreenButton:!1,class:"w-[302px] h-[302px] dingding-qrcode-login-modal",onOpened(){t()}}),u=()=>{const{redirectUri:g}=o;return g||window.location.origin+a.fullPath},t=()=>Z(null,null,function*(){const{clientId:g,corpId:r}=o;window.DTFrameLogin||(yield et("https://g.alicdn.com/dingding/h5-dingtalk-login/0.21.0/ddlogin.js")),window.DTFrameLogin({id:"dingding_qrcode_login_element",width:300,height:300},{redirect_uri:encodeURIComponent(u()),client_id:g,scope:"openid corpid",response_type:"code",state:"1",prompt:"consent",corpId:r},h=>{const{redirectUrl:C}=h;window.location.href=C},h=>{Ft(`Login Error: ${h}`)})}),c=()=>{const{clientId:g,corpId:r,isQrCode:h}=o;h?l.open():window.location.href=`https://login.dingtalk.com/oauth2/auth?redirect_uri=${encodeURIComponent(u())}&response_type=code&client_id=${g}&scope=openid&corpid=${r}&prompt=consent`};return(g,r)=>(f(),T("div",null,[y(e(G),{onClick:c,tooltip:e(b)("authentication.dingdingLogin"),"tooltip-side":"top"},{default:p(()=>[y(e(lt))]),_:1},8,["tooltip"]),y(e(s),null,{default:p(()=>r[0]||(r[0]=[L("div",{id:"dingding_qrcode_login_element"},null,-1)])),_:1,__:[0]})]))}}),qt={class:"w-full sm:mx-auto md:max-w-md"},Nt={class:"mt-4 flex items-center justify-between"},Ot={class:"text-muted-foreground text-center text-xs uppercase"},jt={class:"mt-4 flex flex-wrap justify-center"},Ut=$({name:"ThirdPartyLogin",__name:"third-party-login",setup(n){const{auth:{dingding:o}}=Oe();return(a,s)=>(f(),T("div",qt,[L("div",Nt,[s[0]||(s[0]=L("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1)),L("span",Ot,P(e(b)("authentication.thirdPartyLogin")),1),s[1]||(s[1]=L("span",{class:"border-input w-[35%] border-b dark:border-gray-600"},null,-1))]),L("div",jt,[y(e(G),{tooltip:e(b)("authentication.wechatLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(rt))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(b)("authentication.qqLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(ct))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(b)("authentication.githubLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(dt))]),_:1},8,["tooltip"]),y(e(G),{tooltip:e(b)("authentication.googleLogin"),"tooltip-side":"top",class:"mb-3"},{default:p(()=>[y(e(ut))]),_:1},8,["tooltip"]),e(o)?(f(),v(Wt,{key:0,"corp-id":e(o).corpId,"client-id":e(o).clientId,class:"mb-3"},null,8,["corp-id","client-id"])):B("",!0)])]))}}),Qt=["onKeydown"],Xt={class:"text-muted-foreground"},Kt={key:0,class:"mb-6 flex justify-between"},Gt={class:"flex-center"},Jt={key:1,class:"mb-2 mt-4 flex items-center justify-between"},Ht={key:0,class:"mt-3 text-center text-sm"},Yt=$({name:"AuthenticationLogin",__name:"login",props:{formSchema:{default:()=>[]},codeLoginPath:{default:"/auth/code-login"},forgetPasswordPath:{default:"/auth/forget-password"},loading:{type:Boolean,default:!1},qrCodeLoginPath:{default:"/auth/qrcode-login"},registerPath:{default:"/auth/register"},showCodeLogin:{type:Boolean,default:!0},showForgetPassword:{type:Boolean,default:!0},showQrcodeLogin:{type:Boolean,default:!0},showRegister:{type:Boolean,default:!0},showRememberMe:{type:Boolean,default:!0},showThirdPartyLogin:{type:Boolean,default:!0},subTitle:{default:""},title:{default:""},submitButtonText:{default:""}},emits:["submit"],setup(n,{expose:o,emit:a}){const s=n,l=a,[u,t]=mt(we({commonConfig:{hideLabel:!0,hideRequiredMark:!0},schema:S(()=>s.formSchema),showDefaultActions:!1})),c=je(),g=`REMEMBER_ME_USERNAME_${location.hostname}`,r=localStorage.getItem(g)||"",h=N(!!r);function C(){return Z(this,null,function*(){const{valid:d}=yield t.validate(),w=yield t.getValues();d&&(localStorage.setItem(g,h.value?w==null?void 0:w.username:""),l("submit",w))})}function M(d){c.push(d)}return tt(()=>{r&&t.setFieldValue("username",r)}),o({getFormApi:()=>t}),(d,w)=>(f(),T("div",{onKeydown:Qe(Xe(C,["prevent"]),["enter"])},[k(d.$slots,"title",{},()=>[y(st,null,{desc:p(()=>[L("span",Xt,[k(d.$slots,"subTitle",{},()=>[A(P(d.subTitle||e(b)("authentication.loginSubtitle")),1)])])]),default:p(()=>[k(d.$slots,"title",{},()=>[A(P(d.title||`${e(b)("authentication.welcomeBack")} 👋🏻`),1)])]),_:3})]),y(e(u)),d.showRememberMe||d.showForgetPassword?(f(),T("div",Kt,[L("div",Gt,[d.showRememberMe?(f(),v(e(Ue),{key:0,checked:h.value,"onUpdate:checked":w[0]||(w[0]=_=>h.value=_),name:"rememberMe"},{default:p(()=>[A(P(e(b)("authentication.rememberMe")),1)]),_:1},8,["checked"])):B("",!0)]),d.showForgetPassword?(f(),T("span",{key:0,class:"vben-link text-sm font-normal",onClick:w[1]||(w[1]=_=>M(d.forgetPasswordPath))},P(e(b)("authentication.forgetPassword")),1)):B("",!0)])):B("",!0),y(e(U),{class:F([{"cursor-wait":d.loading},"w-full"]),loading:d.loading,"aria-label":"login",onClick:C},{default:p(()=>[A(P(d.submitButtonText||e(b)("common.login")),1)]),_:1},8,["class","loading"]),d.showCodeLogin||d.showQrcodeLogin?(f(),T("div",Jt,[d.showCodeLogin?(f(),v(e(U),{key:0,class:"w-1/2",variant:"outline",onClick:w[2]||(w[2]=_=>M(d.codeLoginPath))},{default:p(()=>[A(P(e(b)("authentication.mobileLogin")),1)]),_:1})):B("",!0),d.showQrcodeLogin?(f(),v(e(U),{key:1,class:"ml-4 w-1/2",variant:"outline",onClick:w[3]||(w[3]=_=>M(d.qrCodeLoginPath))},{default:p(()=>[A(P(e(b)("authentication.qrcodeLogin")),1)]),_:1})):B("",!0)])):B("",!0),k(d.$slots,"third-party-login",{},()=>[d.showThirdPartyLogin?(f(),v(Ut,{key:0})):B("",!0)]),k(d.$slots,"to-register",{},()=>[d.showRegister?(f(),T("div",Ht,[A(P(e(b)("authentication.accountTip"))+" ",1),L("span",{class:"vben-link text-sm font-normal",onClick:w[4]||(w[4]=_=>M(d.registerPath))},P(e(b)("authentication.createAccount")),1)])):B("",!0)])],40,Qt))}}),lo=$({name:"Login",__name:"login",setup(n){const o=Ke(),a=S(()=>[{component:"VbenInput",componentProps:{placeholder:b("authentication.usernameTip")},fieldName:"username",label:b("authentication.username"),rules:pe().min(1,{message:b("authentication.usernameTip")})},{component:"VbenInputPassword",componentProps:{placeholder:b("authentication.password")},fieldName:"password",label:b("authentication.password"),rules:pe().min(1,{message:b("authentication.passwordTip")})},{component:ot(St),fieldName:"captcha",rules:gt().refine(s=>s,{message:b("authentication.verifyRequiredTip")})}]);return(s,l)=>(f(),v(e(Yt),{"form-schema":a.value,loading:e(o).loginLoading,onSubmit:e(o).authLogin},null,8,["form-schema","loading","onSubmit"]))}});export{lo as _};
