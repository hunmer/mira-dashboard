var T=Object.defineProperty;var L=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var P=(o,a,e)=>a in o?T(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,y=(o,a)=>{for(var e in a||(a={}))z.call(a,e)&&P(o,e,a[e]);if(L)for(var e of L(a))W.call(a,e)&&P(o,e,a[e]);return o};var x=(o,a,e)=>new Promise((i,r)=>{var u=l=>{try{f(e.next(l))}catch(t){r(t)}},p=l=>{try{f(e.throw(l))}catch(t){r(t)}},f=l=>l.done?i(l.value):Promise.resolve(l.value).then(u,p);f((e=e.apply(o,a)).next())});import{u as O,b as R}from"./use-modal-D1oEkpsC.js";import{a$ as U,bc as V,b0 as k,c4 as q,bP as H,cy as Z,b5 as D,b4 as N}from"./bootstrap-CPnRZazZ.js";import{_ as G}from"./login.vue_vue_type_script_setup_true_lang-4OFcPUOw.js";import{P as M,ax as j,am as J,n as F,a0 as Q,a4 as A,a_ as Y,a$ as K,Y as C,J as b,av as X,ab as E,x as m,ac as v,a7 as s,a8 as ee,bU as B,a1 as S,aa as ae}from"../jse/index-index-DUSCGC6b.js";import{_ as te,N as oe,a as ne,b as se}from"./layout.vue_vue_type_script_setup_true_lang-HP3V-BXD.js";import{_ as re}from"./avatar.vue_vue_type_script_setup_true_lang-BEMChVv5.js";import{a as le}from"./use-vben-form-CIxWieLv.js";import"./index-v-775NhF.js";import"./auth-title-CAfFe8B1.js";import"./render-content.vue_vue_type_script_lang-BENyTHol.js";import"./theme-toggle.vue_vue_type_script_setup_true_lang-C5U-VgdZ.js";import"./TabsList.vue_vue_type_script_setup_true_lang-B4MVNG4T.js";import"./rotate-cw-COy3FMlG.js";const ie=U("book-open-text",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]]),d=M(),$=M(!1),w=M({advancedStyle:{colorStops:[{color:"gray",offset:0},{color:"gray",offset:1}],type:"linear"},content:"",contentType:"multi-line-text",globalAlpha:.25,gridLayoutOptions:{cols:2,gap:[20,20],matrix:[[1,0],[0,1]],rows:2},height:200,layout:"grid",rotate:30,width:160});function ue(){function o(i){return x(this,null,function*(){var u;const{Watermark:r}=yield Q(()=>x(null,null,function*(){const{Watermark:p}=yield import("./index.esm-Ofvdfudw.js");return{Watermark:p}}),[]);w.value=y(y({},w.value),i),d.value=new r(w.value),yield(u=d.value)==null?void 0:u.create()})}function a(i){return x(this,null,function*(){var r;d.value?(yield F(),yield(r=d.value)==null?void 0:r.changeOptions(y(y({},w.value),i))):yield o(i)})}function e(){d.value&&(d.value.destroy(),d.value=void 0)}return $.value||($.value=!0,j(()=>{e()})),{destroyWatermark:e,updateWatermark:a,watermark:J(d)}}const ce=A({name:"LoginExpiredModal",__name:"login-expired-modal",props:Y({avatar:{default:""},zIndex:{default:0},codeLoginPath:{},forgetPasswordPath:{},loading:{type:Boolean},qrCodeLoginPath:{},registerPath:{},showCodeLogin:{type:Boolean},showForgetPassword:{type:Boolean},showQrcodeLogin:{type:Boolean},showRegister:{type:Boolean},showRememberMe:{type:Boolean},showThirdPartyLogin:{type:Boolean},subTitle:{},title:{},submitButtonText:{}},{open:{type:Boolean},openModifiers:{}}),emits:["update:open"],setup(o){const a=o,e=K(o,"open"),[i,r]=O();C(()=>e.value,t=>{r.setState({isOpen:t})});const u=b(()=>a.zIndex||l()),p=["ant-message","loading"];function f(t){return p.some(h=>t.classList.contains(h))}function l(){let t=0;return[...document.querySelectorAll("*")].forEach(_=>{const n=window.getComputedStyle(_).getPropertyValue("z-index");n&&!Number.isNaN(Number.parseInt(n))&&!f(_)&&(t=Math.max(t,Number.parseInt(n)))}),t+1}return(t,h)=>(E(),X("div",null,[m(s(i),{closable:!1,"close-on-click-modal":!1,"close-on-press-escape":!1,footer:!1,"fullscreen-button":!1,header:!1,"z-index":u.value,class:"border-none px-10 py-6 text-center shadow-xl sm:w-[600px] sm:rounded-2xl md:h-[unset]"},{default:v(()=>[m(s(re),{src:t.avatar,class:"mx-auto mb-6 size-20"},null,8,["src"]),m(s(V),{"show-forget-password":!1,"show-register":!1,"show-remember-me":!1,"sub-title":s(k)("authentication.loginAgainSubTitle"),title:s(k)("authentication.loginAgainTitle")},{default:v(()=>[ee(t.$slots,"default")]),_:3},8,["sub-title","title"])]),_:3},8,["z-index"])]))}}),Be=A({__name:"basic",setup(o){const a=M([]),e=q(),i=H(),r=Z(),{destroyWatermark:u,updateWatermark:p}=ue(),f=b(()=>a.value.some(n=>!n.isRead)),l=b(()=>[{handler:()=>{B(D,{target:"_blank"})},icon:ie,text:k("ui.widgets.document")},{handler:()=>{B(N,{target:"_blank"})},icon:R,text:"GitHub"},{handler:()=>{B(`${N}/issues`,{target:"_blank"})},icon:le,text:k("ui.widgets.qa")}]),t=b(()=>{var n,c;return(c=(n=e.userInfo)==null?void 0:n.avatar)!=null?c:S.app.defaultAvatar});function h(){return x(this,null,function*(){yield i.logout(!1)})}function _(){a.value=[]}function I(){a.value.forEach(n=>n.isRead=!0)}return C(()=>S.app.watermark,n=>x(null,null,function*(){var c,g;n?yield p({content:`${(c=e.userInfo)==null?void 0:c.username} - ${(g=e.userInfo)==null?void 0:g.realName}`}):u()}),{immediate:!0}),(n,c)=>(E(),ae(s(se),{onClearPreferencesAndLogout:h},{"user-dropdown":v(()=>{var g;return[m(s(ne),{avatar:t.value,menus:l.value,text:(g=s(e).userInfo)==null?void 0:g.realName,description:"ann.vben@gmail.com","tag-text":"Pro",onLogout:h},null,8,["avatar","menus","text"])]}),notification:v(()=>[m(s(oe),{dot:f.value,notifications:a.value,onClear:_,onMakeAll:I},null,8,["dot","notifications"])]),extra:v(()=>[m(s(ce),{open:s(r).loginExpired,"onUpdate:open":c[0]||(c[0]=g=>s(r).loginExpired=g),avatar:t.value},{default:v(()=>[m(G)]),_:1},8,["open","avatar"])]),"lock-screen":v(()=>[m(s(te),{avatar:t.value,onToLogin:h},null,8,["avatar"])]),_:1}))}});export{Be as default};
