var ke=Object.defineProperty,Ce=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var Ve=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var X=(f,r,u)=>r in f?ke(f,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):f[r]=u,Z=(f,r)=>{for(var u in r||(r={}))Ve.call(r,u)&&X(f,u,r[u]);if(Q)for(var u of Q(r))Ie.call(r,u)&&X(f,u,r[u]);return f},ee=(f,r)=>Ce(f,$e(r));var C=(f,r,u)=>new Promise(($,b)=>{var y=h=>{try{a(u.next(h))}catch(k){b(k)}},_=h=>{try{a(u.throw(h))}catch(k){b(k)}},a=h=>h.done?$(h.value):Promise.resolve(h.value).then(y,_);a((u=u.apply(f,r)).next())});import{cA as U,bu as oe,cB as te,cD as p}from"./bootstrap-CPnRZazZ.js";import{a4 as le,P as g,Y as De,av as n,ab as i,aA as M,aB as e,aw as je,T as J,J as B,a9 as Pe,aq as m,aj as d,F as z,aC as A,aV as T,ai as q,b2 as se,x as Se}from"../jse/index-index-DUSCGC6b.js";import{m as V}from"./client-DtYIytis.js";const ze={class:"editor-container"},Ae=le({__name:"MonacoEditor",props:{modelValue:{},language:{default:"json"},height:{default:300},options:{default:()=>({})}},emits:["update:modelValue"],setup(f,{emit:r}){const u=f,$=r,b=g(u.modelValue),y=()=>{$("update:modelValue",b.value)};return De(()=>u.modelValue,_=>{b.value!==_&&(b.value=_)}),(_,a)=>(i(),n("div",ze,[M(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=h=>b.value=h),style:je({height:`${_.height}px`}),class:"code-textarea",placeholder:"请输入配置内容...",onInput:y},null,36),[[U,b.value]])]))}}),Me=oe(Ae,[["__scopeId","data-v-a3db5c44"]]),Fe={class:"plugin-manager"},Ne={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Le={class:"stats-card total-plugins"},Te={class:"stats-content"},Be={class:"stats-info"},Ue={class:"stats-number"},Ee={class:"stats-card active-plugins"},Oe={class:"stats-content"},Je={class:"stats-info"},qe={class:"stats-number"},Ke={class:"stats-card inactive-plugins"},We={class:"stats-content"},He={class:"stats-info"},Re={class:"stats-number"},Ye={class:"library-tabs"},Ge={class:"tab-nav"},Qe=["onClick"],Xe={class:"tab-count"},Ze={key:0},et={class:"flex flex-wrap gap-4 mb-6 p-4 rounded-lg"},tt={class:"relative flex-1 min-w-64"},st=["onUpdate:modelValue","onInput"],ot=["onUpdate:modelValue","onChange"],lt=["onUpdate:modelValue","onChange"],at=["value"],nt=["onClick"],it={class:"flex gap-4 mb-6"},dt={class:"library-stat"},rt={class:"stat-value"},ut={class:"library-stat"},ct={class:"stat-value"},vt={class:"library-stat"},pt={class:"stat-value"},mt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},gt={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ft={class:"plugin-header flex items-center justify-between mb-4"},bt={class:"flex items-center"},ht={class:"w-10 h-10 mr-3 flex items-center justify-center rounded-lg"},_t=["src","alt"],yt={key:1,class:"text-xl"},xt={class:"font-semibold text-lg truncate"},wt={class:"text-sm"},kt={class:"switch"},Ct=["checked","onChange"],$t={class:"text-sm mb-4 line-clamp-2"},Vt={class:"plugin-info space-y-2 mb-4"},It={class:"flex justify-between text-sm"},Dt={class:"truncate ml-2"},jt={class:"flex justify-between text-sm"},Pt={class:"px-2 py-1 text-xs rounded"},St={class:"plugin-actions flex gap-2 mt-auto"},zt=["onClick"],At=["onClick"],Mt={class:"relative"},Ft=["onClick"],Nt={key:0,class:"absolute right-0 mt-1 w-32 border border-gray-200 rounded-md shadow-lg z-10"},Lt=["onClick"],Tt=["onClick"],Bt={key:2,class:"text-center py-12"},Ut={class:"text-lg font-medium mb-2"},Et={class:"text-sm"},Ot={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Jt={class:"relative top-0 right-0 w-96 h-full shadow-lg ml-auto"},qt={class:"p-6"},Kt={class:"flex justify-between items-center mb-6"},Wt={key:0,class:"plugin-detail"},Ht={class:"text-center mb-6"},Rt={class:"w-16 h-16 mx-auto mb-4 flex items-center justify-center rounded-lg"},Yt=["src","alt"],Gt={key:1,class:"text-3xl"},Qt={class:"text-xl font-bold"},Xt={class:"space-y-4"},Zt={class:"detail-item"},es={class:"detail-value"},ts={class:"detail-item"},ss={class:"detail-value"},os={class:"detail-item"},ls={class:"detail-value"},as={class:"detail-item"},ns={class:"detail-value"},is={class:"detail-item"},ds={class:"detail-value"},rs={class:"detail-item"},us={class:"detail-value"},cs={class:"detail-item"},vs={class:"detail-value"},ps={class:"detail-item"},ms={class:"detail-value"},gs={key:0,class:"mt-6"},fs={class:"flex flex-wrap gap-2"},bs={key:1,class:"mt-6"},hs={class:"space-y-1"},_s={class:"flex gap-2 mt-6"},ys=["disabled"],xs={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},ws={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md"},ks={class:"mt-3"},Cs={class:"text-lg font-medium mb-4"},$s={class:"mb-4"},Vs={class:"flex border-b"},Is={key:0,class:"space-y-4"},Ds={key:0,class:"text-sm"},js={key:1,class:"space-y-4"},Ps={class:"flex justify-end space-x-3 pt-4"},Ss=["disabled"],zs={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},As={class:"relative top-10 mx-auto p-5 border w-2/3 max-w-4xl shadow-lg rounded-md"},Ms={class:"mt-3"},Fs={class:"text-lg font-medium mb-4"},Ns={key:0,class:"config-editor"},Ls={class:"flex justify-end space-x-3 pt-4"},Ts=["disabled"],Bs=le({name:"MiraPlugin",__name:"index",setup(f){const r=g(!1),u=g(!1),$=g(!1),b=g(!1),y=g("local"),_=g(null),a=g(null),h=g(""),k=g(null),x=g([]),F=g(""),I=g(null),D=J({}),N=J({}),j=J({}),P=g(""),S=g({name:"",version:"latest"}),ae=B(()=>x.value.reduce((s,t)=>s+t.plugins.length,0)),ne=B(()=>x.value.reduce((s,t)=>s+t.plugins.filter(c=>c.status==="active").length,0)),ie=B(()=>x.value.reduce((s,t)=>s+t.plugins.filter(c=>c.status==="inactive").length,0)),de=B(()=>{if(!P.value)return"插件";const s=x.value.find(t=>t.id===P.value);return s?s.name||s.id:"插件"}),E=s=>({general:"通用",security:"安全",storage:"存储",ui:"界面",utility:"工具",integration:"集成",development:"开发"})[s||"general"]||s||"通用",re=s=>{const t=new Set(s.map(c=>c.category||"general"));return Array.from(t).sort()},ue=s=>s.filter(t=>t.status==="active").length,ce=s=>s.filter(t=>t.status==="inactive").length,K=s=>{let t=s.plugins;const c=D[s.id]||"";if(c){const v=c.toLowerCase();t=t.filter(w=>w.name.toLowerCase().includes(v)||w.author.toLowerCase().includes(v)||w.description&&w.description.toLowerCase().includes(v))}const o=j[s.id]||"";o&&(t=t.filter(v=>v.category===o));const l=N[s.id]||"status";return t.sort((v,w)=>{switch(l){case"status":return v.status!==w.status?v.status==="active"?-1:1:v.name.localeCompare(w.name);case"name":return v.name.localeCompare(w.name);case"author":return v.author.localeCompare(w.author);case"createdAt":return new Date(w.createdAt).getTime()-new Date(v.createdAt).getTime();case"category":return(v.category||"").localeCompare(w.category||"");default:return 0}}),t},W=s=>{const t=s.target;t.style.display="none"},ve=s=>{I.value=I.value===s?null:s},pe=s=>{P.value=s,u.value=!0},me=s=>{},ge=s=>{},fe=s=>{},be=s=>{a.value=s,b.value=!0,I.value=null},H=s=>new Date(s).toLocaleString("zh-CN"),L=()=>C(null,null,function*(){r.value=!0;try{const s=yield V.get("/plugins/by-library");x.value=s.data||[],x.value.forEach(t=>{D[t.id]||(D[t.id]=""),N[t.id]||(N[t.id]="status"),j[t.id]||(j[t.id]="")}),x.value.length>0&&!F.value&&(F.value=x.value[0].id)}catch(s){p.error({message:"加载失败",description:"加载插件列表失败，请稍后重试"}),console.error("Failed to load plugins:",s),x.value=[]}finally{r.value=!1}}),R=(s,t)=>C(null,null,function*(){var c,o;try{const l=t!==void 0?t?"active":"inactive":s.status==="active"?"inactive":"active";yield V.post("/plugins/toggle-status",{pluginName:s.name,libraryId:s.libraryId,status:l}),s.status=l,a.value&&a.value.name===s.name&&(a.value.status=l),p.success({message:"状态更新",description:`插件已${l==="active"?"启用":"禁用"}`})}catch(l){console.error("Toggle plugin error:",l),p.error({message:"操作失败",description:((o=(c=l.response)==null?void 0:c.data)==null?void 0:o.error)||l.message||"未知错误"})}}),Y=s=>C(null,null,function*(){try{const t=yield V.get(`/plugins/${s.name}/config`);h.value=JSON.stringify(t.data,null,2),_.value=s,$.value=!0,b.value=!1}catch(t){p.error({message:"加载失败",description:"加载插件配置失败"})}}),he=()=>C(null,null,function*(){if(_.value)try{const s=JSON.parse(h.value);yield V.put(`/plugins/${_.value.name}/config`,s),p.success({message:"保存成功",description:"配置保存成功"}),$.value=!1}catch(s){s instanceof SyntaxError?p.error({message:"格式错误",description:"JSON 格式错误"}):p.error({message:"保存失败",description:"保存失败"})}}),G=(s,t)=>C(null,null,function*(){switch(I.value=null,s){case"update":try{yield V.post(`/plugins/${t.name}/update`),p.success({message:"更新成功",description:"插件更新成功"}),L()}catch(c){p.error({message:"更新失败",description:"更新失败"})}break;case"uninstall":try{if(!confirm(`确定要卸载插件 "${t.name}" 吗？此操作不可撤销。`))return;yield V.delete(`/plugins/${t.name}`),p.success({message:"卸载成功",description:"插件卸载成功"}),a.value&&a.value.name===t.name&&(b.value=!1,a.value=null),L()}catch(c){p.error({message:"卸载失败",description:"卸载失败"})}break}}),_e=s=>{const t=s.target;t.files&&t.files.length>0&&(k.value=t.files[0]||null)},O=()=>{u.value=!1,k.value=null,P.value="",S.value={name:"",version:"latest"}},ye=()=>C(null,null,function*(){y.value==="repository"?yield we():yield xe()}),xe=()=>C(null,null,function*(){if(!k.value){p.error({message:"文件错误",description:"请选择插件包文件"});return}try{const s=new FormData;s.append("file",k.value),P.value&&s.append("libraryId",P.value),yield V.post("/plugins/upload",s,{headers:{"Content-Type":"multipart/form-data"}}),p.success({message:"安装成功",description:"插件上传安装成功，稍后刷新插件列表"}),O(),setTimeout(()=>{L()},3e3)}catch(s){p.error({message:"安装失败",description:"插件安装失败"})}}),we=()=>C(null,null,function*(){var s,t;if(!S.value.name){p.error({message:"输入错误",description:"请输入插件名称"});return}try{const c=ee(Z({},S.value),{libraryId:P.value});yield V.post("/plugins/install",c),p.success({message:"安装成功",description:"插件安装成功，稍后刷新插件列表"}),O(),setTimeout(()=>{L()},3e3)}catch(c){(t=(s=c.response)==null?void 0:s.data)!=null&&t.error?p.error({message:"安装失败",description:c.response.data.error}):p.error({message:"安装失败",description:"安装失败"})}});return Pe(()=>{L()}),(s,t)=>{var c;return i(),n("div",Fe,[e("div",Ne,[e("div",Le,[e("div",Te,[t[11]||(t[11]=e("div",{class:"stats-icon"},"🔧",-1)),e("div",Be,[t[10]||(t[10]=e("h3",null,"总插件数",-1)),e("p",Ue,d(ae.value),1)])])]),e("div",Ee,[e("div",Oe,[t[13]||(t[13]=e("div",{class:"stats-icon"},"✅",-1)),e("div",Je,[t[12]||(t[12]=e("h3",null,"已启用",-1)),e("p",qe,d(ne.value),1)])])]),e("div",Ke,[e("div",We,[t[15]||(t[15]=e("div",{class:"stats-icon"},"❌",-1)),e("div",He,[t[14]||(t[14]=e("h3",null,"已禁用",-1)),e("p",Re,d(ie.value),1)])])])]),e("div",Ye,[e("div",Ge,[(i(!0),n(z,null,A(x.value,o=>(i(),n("button",{key:o.id,class:T(["tab-button",{active:F.value===o.id}]),onClick:l=>F.value=o.id},[q(d(o.name||o.id)+" ",1),e("span",Xe,d(o.plugins.length),1)],10,Qe))),128))]),(i(!0),n(z,null,A(x.value,o=>(i(),n("div",{key:o.id,class:"tab-content"},[F.value===o.id?(i(),n("div",Ze,[e("div",et,[e("div",tt,[t[16]||(t[16]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),M(e("input",{"onUpdate:modelValue":l=>D[o.id]=l,type:"text",placeholder:"搜索插件名称、作者或描述",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onInput:l=>me(o.id)},null,40,st),[[U,D[o.id]]])]),M(e("select",{"onUpdate:modelValue":l=>N[o.id]=l,class:"block px-3 py-2 border border-gray-300 rounded-md leading-5 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:l=>ge(o.id)},t[17]||(t[17]=[se('<option value="status" data-v-9bdcb8c5>启用状态</option><option value="name" data-v-9bdcb8c5>名称</option><option value="author" data-v-9bdcb8c5>作者</option><option value="createdAt" data-v-9bdcb8c5>安装时间</option><option value="category" data-v-9bdcb8c5>分类</option>',5)]),40,ot),[[te,N[o.id]]]),M(e("select",{"onUpdate:modelValue":l=>j[o.id]=l,class:"block px-3 py-2 border border-gray-300 rounded-md leading-5 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:l=>fe(o.id)},[t[18]||(t[18]=e("option",{value:""},"全部分类",-1)),(i(!0),n(z,null,A(re(o.plugins),l=>(i(),n("option",{key:l,value:l},d(E(l)),9,at))),128))],40,lt),[[te,j[o.id]]]),e("button",{type:"button",onClick:l=>pe(o.id),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},t[19]||(t[19]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),q(" 安装插件 ")]),8,nt)]),e("div",it,[e("div",dt,[t[20]||(t[20]=e("div",{class:"stat-title"},"插件数量",-1)),e("div",rt,d(o.plugins.length),1)]),e("div",ut,[t[21]||(t[21]=e("div",{class:"stat-title"},"已启用",-1)),e("div",ct,d(ue(o.plugins)),1)]),e("div",vt,[t[22]||(t[22]=e("div",{class:"stat-title"},"已禁用",-1)),e("div",pt,d(ce(o.plugins)),1)])]),r.value&&o.plugins.length===0?(i(),n("div",mt,[(i(),n(z,null,A(8,l=>e("div",{key:l,class:"plugin-skeleton"},t[23]||(t[23]=[se('<div class="animate-pulse" data-v-9bdcb8c5><div class="flex items-center space-x-4 mb-4" data-v-9bdcb8c5><div class="w-10 h-10 rounded-lg" data-v-9bdcb8c5></div><div class="flex-1" data-v-9bdcb8c5><div class="h-4 rounded w-3/4 mb-2" data-v-9bdcb8c5></div><div class="h-3 rounded w-1/2" data-v-9bdcb8c5></div></div><div class="w-12 h-6 rounded" data-v-9bdcb8c5></div></div><div class="space-y-2" data-v-9bdcb8c5><div class="h-3 rounded" data-v-9bdcb8c5></div><div class="h-3 rounded w-5/6" data-v-9bdcb8c5></div></div><div class="flex justify-between mt-4" data-v-9bdcb8c5><div class="h-6 rounded w-12" data-v-9bdcb8c5></div><div class="h-6 rounded w-12" data-v-9bdcb8c5></div></div></div>',1)]))),64))])):(i(),n("div",gt,[(i(!0),n(z,null,A(K(o),l=>(i(),n("div",{key:l.name,class:T(["plugin-card transition-all duration-200 cursor-pointer",{"border-green-200":l.status==="active","border-gray-200":l.status==="inactive"}])},[e("div",ft,[e("div",bt,[e("div",ht,[l.icon?(i(),n("img",{key:0,src:l.icon,alt:l.name,class:"w-8 h-8 object-contain",onError:W},null,40,_t)):(i(),n("span",yt,"🔧"))]),e("div",null,[e("h3",xt,d(l.name),1),e("p",wt,"v"+d(l.version),1)])]),e("label",kt,[e("input",{type:"checkbox",checked:l.status==="active",onChange:v=>R(l,v.target.checked)},null,40,Ct),t[24]||(t[24]=e("span",{class:"slider"},null,-1))])]),e("p",$t,d(l.description||"暂无描述"),1),e("div",Vt,[e("div",It,[t[25]||(t[25]=e("span",null,"作者:",-1)),e("span",Dt,d(l.author),1)]),e("div",jt,[t[26]||(t[26]=e("span",null,"分类:",-1)),e("span",Pt,d(E(l.category)),1)])]),e("div",St,[e("button",{type:"button",onClick:v=>be(l),class:"flex-1 px-3 py-2 text-sm text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," 详情 ",8,zt),l.configurable?(i(),n("button",{key:0,type:"button",onClick:v=>Y(l),class:"px-3 py-2 text-sm text-white rounded hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500"}," 配置 ",8,At)):m("",!0),e("div",Mt,[e("button",{type:"button",onClick:v=>ve(l.name),class:"px-3 py-2 text-sm rounded focus:outline-none focus:ring-2"},t[27]||(t[27]=[q(" 更多 "),e("svg",{class:"w-3 h-3 ml-1 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),8,Ft),I.value===l.name?(i(),n("div",Nt,[e("button",{onClick:v=>G("update",l),class:"block w-full text-left px-4 py-2 text-sm"}," 更新 ",8,Lt),t[28]||(t[28]=e("hr",{class:"border-gray-100"},null,-1)),e("button",{onClick:v=>G("uninstall",l),class:"block w-full text-left px-4 py-2 text-sm"}," 卸载 ",8,Tt)])):m("",!0)])])],2))),128))])),!r.value&&K(o).length===0?(i(),n("div",Bt,[t[29]||(t[29]=e("div",{class:"text-4xl mb-4"},"🔧",-1)),e("p",Ut,d(D[o.id]||j[o.id]?"没有找到匹配的插件":"暂无插件"),1),e("p",Et,d(D[o.id]||j[o.id]?"请尝试调整搜索条件":'点击"安装插件"开始添加'),1)])):m("",!0)])):m("",!0)]))),128))]),b.value?(i(),n("div",Ot,[e("div",Jt,[e("div",qt,[e("div",Kt,[t[31]||(t[31]=e("h2",{class:"text-xl font-bold"},"插件详细信息",-1)),e("button",{onClick:t[0]||(t[0]=o=>b.value=!1),class:"focus:outline-none"},t[30]||(t[30]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),a.value?(i(),n("div",Wt,[e("div",Ht,[e("div",Rt,[a.value.icon?(i(),n("img",{key:0,src:a.value.icon,alt:a.value.name,class:"w-12 h-12 object-contain",onError:W},null,40,Yt)):(i(),n("span",Gt,"🔧"))]),e("h2",Qt,d(a.value.name),1),e("p",null,"v"+d(a.value.version),1),e("span",{class:T(["inline-block px-3 py-1 text-sm font-medium rounded-full mt-2",(a.value.status==="active","")])},d(a.value.status==="active"?"已启用":"已禁用"),3)]),e("div",Xt,[e("div",Zt,[t[32]||(t[32]=e("label",{class:"detail-label"},"描述",-1)),e("div",es,d(a.value.description||"暂无描述"),1)]),e("div",ts,[t[33]||(t[33]=e("label",{class:"detail-label"},"作者",-1)),e("div",ss,d(a.value.author),1)]),e("div",os,[t[34]||(t[34]=e("label",{class:"detail-label"},"分类",-1)),e("div",ls,d(E(a.value.category)),1)]),e("div",as,[t[35]||(t[35]=e("label",{class:"detail-label"},"所属库",-1)),e("div",ns,d(a.value.libraryName||a.value.libraryId||"未知"),1)]),e("div",is,[t[36]||(t[36]=e("label",{class:"detail-label"},"依赖数量",-1)),e("div",ds,d(a.value.dependencies.length)+" 个",1)]),e("div",rs,[t[37]||(t[37]=e("label",{class:"detail-label"},"入口文件",-1)),e("div",us,d(a.value.main),1)]),e("div",cs,[t[38]||(t[38]=e("label",{class:"detail-label"},"安装时间",-1)),e("div",vs,d(H(a.value.createdAt)),1)]),e("div",ps,[t[39]||(t[39]=e("label",{class:"detail-label"},"更新时间",-1)),e("div",ms,d(H(a.value.updatedAt)),1)])]),a.value.tags&&a.value.tags.length>0?(i(),n("div",gs,[t[40]||(t[40]=e("h4",{class:"font-semibold mb-2"},"标签",-1)),e("div",fs,[(i(!0),n(z,null,A(a.value.tags,o=>(i(),n("span",{key:o,class:"px-2 py-1 text-xs rounded"},d(o),1))),128))])])):m("",!0),a.value.dependencies.length>0?(i(),n("div",bs,[t[41]||(t[41]=e("h4",{class:"font-semibold mb-2"},"依赖项",-1)),e("div",hs,[(i(!0),n(z,null,A(a.value.dependencies,o=>(i(),n("span",{key:o,class:"block px-2 py-1 text-xs rounded"},d(o),1))),128))])])):m("",!0),e("div",_s,[e("button",{type:"button",disabled:!a.value.configurable,onClick:t[1]||(t[1]=o=>Y(a.value)),class:"flex-1 px-4 py-2 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}," 配置插件 ",8,ys),e("button",{type:"button",onClick:t[2]||(t[2]=o=>R(a.value,a.value.status!=="active")),class:"px-4 py-2 text-white rounded hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500"},d(a.value.status==="active"?"禁用":"启用"),1)])])):m("",!0)])])])):m("",!0),u.value?(i(),n("div",xs,[e("div",ws,[e("div",ks,[e("h3",Cs,"为 "+d(de.value)+" 安装插件",1),e("div",$s,[e("div",Vs,[e("button",{class:T(["px-4 py-2 font-medium text-sm",y.value==="local"?"border-b-2 border-blue-500":""]),onClick:t[3]||(t[3]=o=>y.value="local")}," 从本地安装 ",2),e("button",{class:T(["px-4 py-2 font-medium text-sm",y.value==="repository"?"border-b-2 border-blue-500":""]),onClick:t[4]||(t[4]=o=>y.value="repository")}," 从仓库安装 ",2)])]),y.value==="local"?(i(),n("div",Is,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium mb-2"},"选择插件包",-1)),e("input",{type:"file",accept:".zip,.tar.gz",onChange:_e,class:"block w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 hover:file:bg-blue-100"},null,32),t[43]||(t[43]=e("p",{class:"text-xs mt-1"},"支持 .zip 和 .tar.gz 格式的插件包",-1))]),k.value?(i(),n("div",Ds," 已选择: "+d(k.value.name),1)):m("",!0)])):m("",!0),y.value==="repository"?(i(),n("div",js,[e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium mb-1"},"插件名称",-1)),M(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>S.value.name=o),type:"text",placeholder:"请输入npm包名称，如：mira-plugin-example",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,S.value.name]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium mb-1"},"版本",-1)),M(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>S.value.version=o),type:"text",placeholder:"latest",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[U,S.value.version]])])])):m("",!0),e("div",Ps,[e("button",{type:"button",onClick:O,class:"px-4 py-2 border rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2"}," 取消 "),e("button",{type:"button",onClick:ye,disabled:r.value,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},d(r.value?"安装中...":"安装"),9,Ss)])])])])):m("",!0),$.value?(i(),n("div",zs,[e("div",As,[e("div",Ms,[e("h3",Fs,"配置 "+d((c=_.value)==null?void 0:c.name),1),_.value?(i(),n("div",Ns,[Se(Me,{modelValue:h.value,"onUpdate:modelValue":t[7]||(t[7]=o=>h.value=o),language:"json",height:400},null,8,["modelValue"])])):m("",!0),e("div",Ls,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>$.value=!1),class:"px-4 py-2 border rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2"}," 取消 "),e("button",{type:"button",onClick:he,disabled:r.value,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},d(r.value?"保存中...":"保存"),9,Ts)])])])])):m("",!0),I.value?(i(),n("div",{key:3,onClick:t[9]||(t[9]=o=>I.value=null),class:"fixed inset-0 z-0"})):m("",!0)])}}}),qs=oe(Bs,[["__scopeId","data-v-9bdcb8c5"]]);export{qs as default};
