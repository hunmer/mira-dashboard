var E=(e,t,l)=>new Promise((a,n)=>{var c=i=>{try{d(l.next(i))}catch(f){n(f)}},u=i=>{try{d(l.throw(i))}catch(f){n(f)}},d=i=>i.done?a(i.value):Promise.resolve(i.value).then(c,u);d((l=l.apply(e,t)).next())});import{m as j}from"./client-DtYIytis.js";import{az as De,cz as Te,aO as Ie,_ as b,g as pe,m as me,r as fe,D as ze,P as J,a as ve,b as W,f as Me,x as Fe,A as ge,l as Be,ch as Z,C as Pe,e as Le,s as ye,o as Ee,V as k,c9 as Re,ca as D,bu as Ne}from"./bootstrap-CPnRZazZ.js";import{x as o,R as Oe,P as I,F as be,a4 as G,aD as Ae,az as Se,aF as je,_ as re,J as $e,a9 as xe,p as ke,ax as He,av as U,ab as R,aB as h,ac as y,ai as C,a7 as p,aa as ee,aq as te,aj as L,aC as Ue,aV as Ve}from"../jse/index-index-DUSCGC6b.js";import{S as We,C as X,T as Xe}from"./index-BCgS9c4V.js";import{T as ce}from"./index-B7Hyjluc.js";import{u as Ge,r as de}from"./responsiveObserve-bJ1LBcyN.js";import{Textarea as qe}from"./index-Cwka4K4c.js";import"./index-CBIup3_9.js";import"./shallowequal-BhbZS77P.js";import"./Trigger-BBlHK6Ol.js";import"./ResizeObserver.es-CDE7jhPe.js";import"./_arrayIncludes-B8uzE354.js";import"./Overflow-B72o2PGR.js";import"./BaseInput-ZenqoygY.js";import"./index-CAdIk97D.js";import"./colors-ofYEz2iF.js";import"./collapseMotion-IRy70ZwQ.js";import"./slide-ddnvS3KN.js";import"./useRefs-DL0CxS4f.js";import"./DownOutlined-DdLCEGxW.js";import"./useMergedState-Dl9jynAc.js";import"./EyeOutlined-koE-TdJ_.js";import"./index-n9-ArQkr.js";import"./index-C1EGCwpW.js";import"./CheckOutlined-DgDniMN_.js";import"./SearchOutlined-B7HDs4KV.js";import"./move-TRtUWpcO.js";import"./index-DdqWSe-9.js";import"./index-B60s6XUk.js";import"./FormItemContext-w0fsuxZa.js";import"./statusUtils-DoLtEY_8.js";import"./index-Dd76ephO.js";import"./index-fa6a_x7w.js";import"./Checkbox-DRp7kWfS.js";import"./index-DqNsvV-3.js";function q(e){return e!=null}const ne=e=>{const{itemPrefixCls:t,component:l,span:a,labelStyle:n,contentStyle:c,bordered:u,label:d,content:i,colon:f}=e,v=l;return u?o(v,{class:[{[`${t}-item-label`]:q(d),[`${t}-item-content`]:q(i)}],colSpan:a},{default:()=>[q(d)&&o("span",{style:n},[d]),q(i)&&o("span",{style:c},[i])]}):o(v,{class:[`${t}-item`],colSpan:a},{default:()=>[o("div",{class:`${t}-item-container`},[(d||d===0)&&o("span",{class:[`${t}-item-label`,{[`${t}-item-no-colon`]:!f}],style:n},[d]),(i||i===0)&&o("span",{class:`${t}-item-content`,style:c},[i])])]})},Je=e=>{const t=(f,v,m)=>{let{colon:g,prefixCls:w,bordered:$}=v,{component:B,type:O,showLabel:A,showContent:T,labelStyle:z,contentStyle:M}=m;return f.map((_,s)=>{var r,P;const x=_.props||{},{prefixCls:S=w,span:H=1,labelStyle:oe=x["label-style"],contentStyle:ae=x["content-style"],label:se=(P=(r=_.children)===null||r===void 0?void 0:r.label)===null||P===void 0?void 0:P.call(r)}=x,ie=De(_),Y=Te(_),K=Ie(_),{key:Q}=_;return typeof B=="string"?o(ne,{key:`${O}-${String(Q)||s}`,class:Y,style:K,labelStyle:b(b({},z),oe),contentStyle:b(b({},M),ae),span:H,colon:g,component:B,itemPrefixCls:S,bordered:$,label:A?se:null,content:T?ie:null},null):[o(ne,{key:`label-${String(Q)||s}`,class:Y,style:b(b(b({},z),K),oe),span:1,colon:g,component:B[0],itemPrefixCls:S,bordered:$,label:se},null),o(ne,{key:`content-${String(Q)||s}`,class:Y,style:b(b(b({},M),K),ae),span:H*2-1,component:B[1],itemPrefixCls:S,bordered:$,content:ie},null)]})},{prefixCls:l,vertical:a,row:n,index:c,bordered:u}=e,{labelStyle:d,contentStyle:i}=Oe(Ce,{labelStyle:I({}),contentStyle:I({})});return a?o(be,null,[o("tr",{key:`label-${c}`,class:`${l}-row`},[t(n,e,{component:"th",type:"label",showLabel:!0,labelStyle:d.value,contentStyle:i.value})]),o("tr",{key:`content-${c}`,class:`${l}-row`},[t(n,e,{component:"td",type:"content",showContent:!0,labelStyle:d.value,contentStyle:i.value})])]):o("tr",{key:c,class:`${l}-row`},[t(n,e,{component:u?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0,labelStyle:d.value,contentStyle:i.value})])},Ye=e=>{const{componentCls:t,descriptionsSmallPadding:l,descriptionsDefaultPadding:a,descriptionsMiddlePadding:n,descriptionsBg:c}=e;return{[`&${t}-bordered`]:{[`${t}-view`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"}},[`${t}-item-label, ${t}-item-content`]:{padding:a,borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`${t}-item-label`]:{backgroundColor:c,"&::after":{display:"none"}},[`${t}-row`]:{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"}},[`&${t}-middle`]:{[`${t}-item-label, ${t}-item-content`]:{padding:n}},[`&${t}-small`]:{[`${t}-item-label, ${t}-item-content`]:{padding:l}}}}},Ke=e=>{const{componentCls:t,descriptionsExtraColor:l,descriptionItemPaddingBottom:a,descriptionsItemLabelColonMarginRight:n,descriptionsItemLabelColonMarginLeft:c,descriptionsTitleMarginBottom:u}=e;return{[t]:b(b(b({},fe(e)),Ye(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:u},[`${t}-title`]:b(b({},ze),{flex:"auto",color:e.colorText,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:l,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${t}-row`]:{"> th, > td":{paddingBottom:a},"&:last-child":{borderBottom:"none"}},[`${t}-item-label`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${c}px ${n}px`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},Qe=pe("Descriptions",e=>{const t=e.colorFillAlter,l=e.fontSizeSM*e.lineHeightSM,a=e.colorText,n=`${e.paddingXS}px ${e.padding}px`,c=`${e.padding}px ${e.paddingLG}px`,u=`${e.paddingSM}px ${e.paddingLG}px`,d=e.padding,i=e.marginXS,f=e.marginXXS/2,v=me(e,{descriptionsBg:t,descriptionsTitleMarginBottom:l,descriptionsExtraColor:a,descriptionItemPaddingBottom:d,descriptionsSmallPadding:n,descriptionsDefaultPadding:c,descriptionsMiddlePadding:u,descriptionsItemLabelColonMarginRight:i,descriptionsItemLabelColonMarginLeft:f});return[Ke(v)]});J.any;const Ze=()=>({prefixCls:String,label:J.any,labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0},span:{type:Number,default:1}}),N=G({compatConfig:{MODE:3},name:"ADescriptionsItem",props:Ze(),setup(e,t){let{slots:l}=t;return()=>{var a;return(a=l.default)===null||a===void 0?void 0:a.call(l)}}}),he={xxxl:3,xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function et(e,t){if(typeof e=="number")return e;if(typeof e=="object")for(let l=0;l<de.length;l++){const a=de[l];if(t[a]&&e[a]!==void 0)return e[a]||he[a]}return 3}function ue(e,t,l){let a=e;return(l===void 0||l>t)&&(a=Fe(e,{span:t})),a}function tt(e,t){const l=Me(e),a=[];let n=[],c=t;return l.forEach((u,d)=>{var i;const f=(i=u.props)===null||i===void 0?void 0:i.span,v=f||1;if(d===l.length-1){n.push(ue(u,c,f)),a.push(n);return}v<c?(c-=v,n.push(u)):(n.push(ue(u,c,v)),a.push(n),c=t,n=[])}),a}const nt=()=>({prefixCls:String,bordered:{type:Boolean,default:void 0},size:{type:String,default:"default"},title:J.any,extra:J.any,column:{type:[Number,Object],default:()=>he},layout:String,colon:{type:Boolean,default:void 0},labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0}}),Ce=Symbol("descriptionsContext"),V=G({compatConfig:{MODE:3},name:"ADescriptions",inheritAttrs:!1,props:nt(),slots:Object,Item:N,setup(e,t){let{slots:l,attrs:a}=t;const{prefixCls:n,direction:c}=ve("descriptions",e);let u;const d=I({}),[i,f]=Qe(n),v=Ge();Ae(()=>{u=v.value.subscribe(g=>{typeof e.column=="object"&&(d.value=g)})}),Se(()=>{v.value.unsubscribe(u)}),je(Ce,{labelStyle:re(e,"labelStyle"),contentStyle:re(e,"contentStyle")});const m=$e(()=>et(e.column,d.value));return()=>{var g,w,$;const{size:B,bordered:O=!1,layout:A="horizontal",colon:T=!0,title:z=(g=l.title)===null||g===void 0?void 0:g.call(l),extra:M=(w=l.extra)===null||w===void 0?void 0:w.call(l)}=e,_=($=l.default)===null||$===void 0?void 0:$.call(l),s=tt(_,m.value);return i(o("div",W(W({},a),{},{class:[n.value,{[`${n.value}-${B}`]:B!=="default",[`${n.value}-bordered`]:!!O,[`${n.value}-rtl`]:c.value==="rtl"},a.class,f.value]}),[(z||M)&&o("div",{class:`${n.value}-header`},[z&&o("div",{class:`${n.value}-title`},[z]),M&&o("div",{class:`${n.value}-extra`},[M])]),o("div",{class:`${n.value}-view`},[o("table",null,[o("tbody",null,[s.map((r,P)=>o(Je,{key:P,index:P,colon:T,prefixCls:n.value,vertical:A==="vertical",bordered:O,row:r},null))])])])]))}}});V.install=function(e){return e.component(V.name,V),e.component(V.Item.name,V.Item),e};const we=e=>{const{value:t,formatter:l,precision:a,decimalSeparator:n,groupSeparator:c="",prefixCls:u}=e;let d;if(typeof l=="function")d=l({value:t});else{const i=String(t),f=i.match(/^(-?)(\d*)(\.(\d+))?$/);if(!f)d=i;else{const v=f[1];let m=f[2]||"0",g=f[4]||"";m=m.replace(/\B(?=(\d{3})+(?!\d))/g,c),typeof a=="number"&&(g=g.padEnd(a,"0").slice(0,a>0?a:0)),g&&(g=`${n}${g}`),d=[o("span",{key:"int",class:`${u}-content-value-int`},[v,m]),g&&o("span",{key:"decimal",class:`${u}-content-value-decimal`},[g])]}}return o("span",{class:`${u}-content-value`},[d])};we.displayName="StatisticNumber";const lt=e=>{const{componentCls:t,marginXXS:l,padding:a,colorTextDescription:n,statisticTitleFontSize:c,colorTextHeading:u,statisticContentFontSize:d,statisticFontFamily:i}=e;return{[`${t}`]:b(b({},fe(e)),{[`${t}-title`]:{marginBottom:l,color:n,fontSize:c},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:u,fontSize:d,fontFamily:i,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:l},[`${t}-content-suffix`]:{marginInlineStart:l}}})}},ot=pe("Statistic",e=>{const{fontSizeHeading3:t,fontSize:l,fontFamily:a}=e,n=me(e,{statisticTitleFontSize:l,statisticContentFontSize:t,statisticFontFamily:a});return[lt(n)]}),_e=()=>({prefixCls:String,decimalSeparator:String,groupSeparator:String,format:String,value:ye([Number,String,Object]),valueStyle:{type:Object,default:void 0},valueRender:Le(),formatter:Pe(),precision:Number,prefix:Z(),suffix:Z(),title:Z(),loading:Be()}),F=G({compatConfig:{MODE:3},name:"AStatistic",inheritAttrs:!1,props:ge(_e(),{decimalSeparator:".",groupSeparator:",",loading:!1}),slots:Object,setup(e,t){let{slots:l,attrs:a}=t;const{prefixCls:n,direction:c}=ve("statistic",e),[u,d]=ot(n);return()=>{var i,f,v,m,g,w,$;const{value:B=0,valueStyle:O,valueRender:A}=e,T=n.value,z=(i=e.title)!==null&&i!==void 0?i:(f=l.title)===null||f===void 0?void 0:f.call(l),M=(v=e.prefix)!==null&&v!==void 0?v:(m=l.prefix)===null||m===void 0?void 0:m.call(l),_=(g=e.suffix)!==null&&g!==void 0?g:(w=l.suffix)===null||w===void 0?void 0:w.call(l),s=($=e.formatter)!==null&&$!==void 0?$:l.formatter;let r=o(we,W({"data-for-update":Date.now()},b(b({},e),{prefixCls:T,value:B,formatter:s})),null);return A&&(r=A(r)),u(o("div",W(W({},a),{},{class:[T,{[`${T}-rtl`]:c.value==="rtl"},a.class,d.value]}),[z&&o("div",{class:`${T}-title`},[z]),o(We,{paragraph:!1,loading:e.loading},{default:()=>[o("div",{style:O,class:`${T}-content`},[M&&o("span",{class:`${T}-content-prefix`},[M]),r,_&&o("span",{class:`${T}-content-suffix`},[_])])]})]))}}}),at=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function st(e,t){let l=e;const a=/\[[^\]]*]/g,n=(t.match(a)||[]).map(i=>i.slice(1,-1)),c=t.replace(a,"[]"),u=at.reduce((i,f)=>{let[v,m]=f;if(i.includes(v)){const g=Math.floor(l/m);return l-=g*m,i.replace(new RegExp(`${v}+`,"g"),w=>{const $=w.length;return g.toString().padStart($,"0")})}return i},c);let d=0;return u.replace(a,()=>{const i=n[d];return d+=1,i})}function it(e,t){const{format:l=""}=t,a=new Date(e).getTime(),n=Date.now(),c=Math.max(a-n,0);return st(c,l)}const rt=1e3/30;function le(e){return new Date(e).getTime()}const ct=()=>b(b({},_e()),{value:ye([Number,String,Object]),format:String,onFinish:Function,onChange:Function}),dt=G({compatConfig:{MODE:3},name:"AStatisticCountdown",props:ge(ct(),{format:"HH:mm:ss"}),setup(e,t){let{emit:l,slots:a}=t;const n=I(),c=I(),u=()=>{const{value:m}=e;le(m)>=Date.now()?d():i()},d=()=>{if(n.value)return;const m=le(e.value);n.value=setInterval(()=>{c.value.$forceUpdate(),m>Date.now()&&l("change",m-Date.now()),u()},rt)},i=()=>{const{value:m}=e;n.value&&(clearInterval(n.value),n.value=void 0,le(m)<Date.now()&&l("finish"))},f=m=>{let{value:g,config:w}=m;const{format:$}=e;return it(g,b(b({},w),{format:$}))},v=m=>m;return xe(()=>{u()}),ke(()=>{u()}),Se(()=>{i()}),()=>{const m=e.value;return o(F,W({ref:c},b(b({},Ee(e,["onFinish","onChange"])),{value:m,valueRender:v,formatter:f})),a)}}});F.Countdown=dt;F.install=function(e){return e.component(F.name,F),e.component(F.Countdown.name,F.Countdown),e};F.Countdown;const ut={class:"p-4"},pt={class:"header-section"},mt={class:"header-actions"},ft={class:"stats-grid"},vt={key:1,class:"action-buttons"},gt={key:0,class:"device-detail"},yt={class:"message-section"},bt={class:"message-input-group"},St={class:"message-history"},$t={class:"message-list"},xt={class:"message-time"},ht={class:"message-content"},Ct={key:0,class:"no-messages"},wt=G({name:"MiraDeviceManager",__name:"index",setup(e){const t=I(!1),l=I(!1),a=I(!1),n=I(null),c=I(""),u=I([]),d=I([]),i=I(null),f=[{title:"设备名称",dataIndex:"name",key:"name",width:200},{title:"IP地址",dataIndex:"ip",key:"ip",width:150},{title:"端口",dataIndex:"port",key:"port",width:100},{title:"设备类型",dataIndex:"type",key:"type",width:120},{title:"连接状态",key:"status",width:120},{title:"操作",key:"actions",width:200}],v=$e(()=>{const s=u.value.length,r=u.value.filter(S=>S.status==="online").length,P=u.value.filter(S=>S.status==="offline").length,x=u.value.filter(S=>S.status==="connecting").length;return{total:s,online:r,offline:P,connecting:x}}),m=()=>E(null,null,function*(){t.value=!0;try{const s=yield j.get("/devices");u.value=s.data||[]}catch(s){D.error("获取设备列表失败"),console.error("Failed to load devices:",s)}finally{t.value=!1}}),g=s=>E(null,null,function*(){s.connecting=!0;try{yield j.post(`/devices/${s.id}/connect`),D.success(`正在连接设备 ${s.name}`),s.status="connecting"}catch(r){D.error(`连接设备失败: ${s.name}`),console.error("Failed to connect device:",r)}finally{s.connecting=!1}}),w=s=>E(null,null,function*(){try{yield j.post(`/devices/${s.id}/disconnect`),D.success(`已断开设备 ${s.name}`),s.status="offline"}catch(r){D.error(`断开设备失败: ${s.name}`),console.error("Failed to disconnect device:",r)}}),$=()=>E(null,null,function*(){l.value=!0;try{yield j.post("/devices/connect-all"),D.success("正在连接所有设备"),u.value.forEach(s=>{s.status==="offline"&&(s.status="connecting")})}catch(s){D.error("连接所有设备失败"),console.error("Failed to connect all devices:",s)}finally{l.value=!1}}),B=()=>E(null,null,function*(){try{yield j.post("/devices/disconnect-all"),D.success("已断开所有设备连接"),u.value.forEach(s=>{s.status="offline"})}catch(s){D.error("断开所有设备失败"),console.error("Failed to disconnect all devices:",s)}}),O=s=>E(null,null,function*(){try{yield j.post(`/devices/${s.id}/test`),D.success(`测试消息已发送到 ${s.name}`)}catch(r){D.error(`发送测试消息失败: ${s.name}`),console.error("Failed to send test message:",r)}}),A=s=>E(null,null,function*(){n.value=s,a.value=!0;try{const r=yield j.get(`/devices/${s.id}/messages`);d.value=r.data||[]}catch(r){console.error("Failed to load device messages:",r),d.value=[]}}),T=()=>E(null,null,function*(){if(!n.value||!c.value.trim()){D.warning("请输入要发送的消息");return}try{yield j.post(`/devices/${n.value.id}/message`,{content:c.value}),D.success("消息发送成功"),c.value="",d.value.unshift({id:Date.now().toString(),deviceId:n.value.id,type:"sent",content:c.value,timestamp:new Date().toISOString()})}catch(s){D.error("发送消息失败"),console.error("Failed to send custom message:",s)}}),z=s=>{switch(s){case"online":return"green";case"offline":return"red";case"connecting":return"orange";default:return"default"}},M=s=>{switch(s){case"online":return"在线";case"offline":return"离线";case"connecting":return"连接中";default:return"未知"}},_=s=>s?new Date(s).toLocaleString("zh-CN"):"无";return xe(()=>{m()}),He(()=>{i.value&&i.value.close()}),(s,r)=>{var P;return R(),U("div",ut,[h("div",pt,[r[5]||(r[5]=h("div",null,[h("h1",{class:"page-title"},"设备管理器"),h("p",{class:"page-description"},"实时监控和管理连接的设备")],-1)),h("div",mt,[o(p(k),{onClick:m},{default:y(()=>r[2]||(r[2]=[h("span",{style:{"margin-right":"4px"}},"🔄",-1),C(" 刷新设备 ")])),_:1,__:[2]}),o(p(k),{type:"primary",onClick:$,loading:l.value},{default:y(()=>r[3]||(r[3]=[h("span",{style:{"margin-right":"4px"}},"🔗",-1),C(" 连接所有设备 ")])),_:1,__:[3]},8,["loading"]),o(p(k),{danger:"",onClick:B},{default:y(()=>r[4]||(r[4]=[h("span",{style:{"margin-right":"4px"}},"⛓️‍💥",-1),C(" 断开所有连接 ")])),_:1,__:[4]})])]),h("div",ft,[o(p(X),{size:"small"},{default:y(()=>[o(p(F),{title:"总设备数",value:v.value.total,"value-style":{color:"#1890ff"},prefix:"📱"},null,8,["value"])]),_:1}),o(p(X),{size:"small"},{default:y(()=>[o(p(F),{title:"在线设备",value:v.value.online,"value-style":{color:"#52c41a"},prefix:"🟢"},null,8,["value"])]),_:1}),o(p(X),{size:"small"},{default:y(()=>[o(p(F),{title:"离线设备",value:v.value.offline,"value-style":{color:"#f5222d"},prefix:"🔴"},null,8,["value"])]),_:1}),o(p(X),{size:"small"},{default:y(()=>[o(p(F),{title:"连接中设备",value:v.value.connecting,"value-style":{color:"#faad14"},prefix:"🟡"},null,8,["value"])]),_:1})]),o(p(X),{title:"设备列表",class:"device-list-card"},{default:y(()=>[o(p(Xe),{loading:t.value,dataSource:u.value,columns:f,pagination:{pageSize:10},"row-key":"id"},{bodyCell:y(({column:x,record:S})=>[x.key==="status"?(R(),ee(p(ce),{key:0,color:z(S.status)},{default:y(()=>[C(L(M(S.status)),1)]),_:2},1032,["color"])):x.key==="actions"?(R(),U("div",vt,[S.status==="offline"?(R(),ee(p(k),{key:0,size:"small",type:"primary",onClick:H=>g(S),loading:S.connecting},{default:y(()=>r[6]||(r[6]=[C(" 连接 ")])),_:2,__:[6]},1032,["onClick","loading"])):(R(),ee(p(k),{key:1,size:"small",danger:"",onClick:H=>w(S)},{default:y(()=>r[7]||(r[7]=[C(" 断开 ")])),_:2,__:[7]},1032,["onClick"])),o(p(k),{size:"small",onClick:H=>O(S),disabled:S.status!=="online"},{default:y(()=>r[8]||(r[8]=[C(" 测试 ")])),_:2,__:[8]},1032,["onClick","disabled"]),o(p(k),{size:"small",onClick:H=>A(S)},{default:y(()=>r[9]||(r[9]=[C(" 详情 ")])),_:2,__:[9]},1032,["onClick"])])):te("",!0)]),_:1},8,["loading","dataSource"])]),_:1}),o(p(Re),{open:a.value,"onUpdate:open":r[1]||(r[1]=x=>a.value=x),title:`设备详情: ${(P=n.value)==null?void 0:P.name}`,width:"800px"},{default:y(()=>[n.value?(R(),U("div",gt,[o(p(V),{column:2,bordered:""},{default:y(()=>[o(p(N),{label:"设备名称"},{default:y(()=>[C(L(n.value.name),1)]),_:1}),o(p(N),{label:"设备ID"},{default:y(()=>[C(L(n.value.id),1)]),_:1}),o(p(N),{label:"IP地址"},{default:y(()=>[C(L(n.value.ip),1)]),_:1}),o(p(N),{label:"端口"},{default:y(()=>[C(L(n.value.port),1)]),_:1}),o(p(N),{label:"设备类型"},{default:y(()=>[C(L(n.value.type),1)]),_:1}),o(p(N),{label:"连接状态"},{default:y(()=>[o(p(ce),{color:z(n.value.status)},{default:y(()=>[C(L(M(n.value.status)),1)]),_:1},8,["color"])]),_:1}),o(p(N),{label:"最后连接时间"},{default:y(()=>[C(L(_(n.value.lastConnectedAt)),1)]),_:1}),o(p(N),{label:"设备信息"},{default:y(()=>[C(L(n.value.deviceInfo||"无"),1)]),_:1})]),_:1}),h("div",yt,[r[11]||(r[11]=h("h4",null,"发送消息",-1)),h("div",bt,[o(p(qe),{value:c.value,"onUpdate:value":r[0]||(r[0]=x=>c.value=x),rows:3,placeholder:"输入要发送的测试消息..."},null,8,["value"]),o(p(k),{type:"primary",onClick:T,disabled:n.value.status!=="online",class:"send-button"},{default:y(()=>r[10]||(r[10]=[C(" 发送 ")])),_:1,__:[10]},8,["disabled"])])]),h("div",St,[r[12]||(r[12]=h("h4",null,"消息历史",-1)),h("div",$t,[(R(!0),U(be,null,Ue(d.value,x=>(R(),U("div",{key:x.id,class:Ve(["message-item",x.type])},[h("div",xt,L(_(x.timestamp)),1),h("div",ht,L(x.content),1)],2))),128)),d.value.length===0?(R(),U("div",Ct," 暂无消息记录 ")):te("",!0)])])])):te("",!0)]),_:1},8,["open","title"])])}}}),rn=Ne(wt,[["__scopeId","data-v-441eab5e"]]);export{rn as default};
